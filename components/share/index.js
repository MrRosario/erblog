import Link from 'next/link';

const Share = ({ title, text, slug }) => {
    const currentUrl = window.location.href;

    const handleShare = () => {
        if (window.navigator.share) {
            window.navigator.share({
              title: title,
              text: text,
              url: currentUrl
            })
            .then(() => console.log('Successful share'))
            .catch((error) => console.log('Error sharing', error));
        }
    }
    const hadleShareTwitter = () => {
        window.open(
            `https://twitter.com/intent/tweet?url=${currentUrl}&text=${title}`
        ); 
    }

    return(
        <div className="share">
           {window.navigator.share ? 
                (
                <div className="share__native" onClick={handleShare}>
                    <ShareIcon />
                    <span>Compartilhar</span>
                </div>
                )
           :    (
               <div className="share_social-media">
                   <TwitterIcon callback={hadleShareTwitter} />
                   <WhatsappIcon title={title} url={currentUrl} />
                   <FacebookIcon url={currentUrl} />
               </div>
                )
           } 
        </div>
    )
}

function ShareIcon(){
    return(
        <svg xmlns="http://www.w3.org/2000/svg" height="24" viewBox="0 0 24 24" width="24">
            <path d="M0 0h24v24H0z" fill="none"/>
            <path d="M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7s-.04-.47-.09-.7l7.05-4.11c.54.5 1.25.81 2.04.81 1.66 0 3-1.34 3-3s-1.34-3-3-3-3 1.34-3 3c0 .24.04.47.09.7L8.04 9.81C7.5 9.31 6.79 9 6 9c-1.66 0-3 1.34-3 3s1.34 3 3 3c.79 0 1.5-.31 2.04-.81l7.12 4.16c-.05.21-.08.43-.08.65 0 1.61 1.31 2.92 2.92 2.92 1.61 0 2.92-1.31 2.92-2.92s-1.31-2.92-2.92-2.92z"/>
        </svg>
    )
}

function TwitterIcon({ callback }){
    return(
        <a href="javascript:void(0)" target="_blank" rel="noreferrer" onClick={callback}>
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 18" fill="none">
                <path d="M23.25 2.13282C22.406 2.49955 21.513 2.74116 20.5992 2.85001C21.5595 2.28769 22.2817 1.39434 22.6303 0.337508C21.7224 0.86841 20.7307 1.24092 19.6978 1.43907C19.2629 0.983225 18.7397 0.620588 18.1603 0.373201C17.5808 0.125814 16.9571 -0.00115656 16.327 7.93801e-06C13.7761 7.93801e-06 11.7117 2.03438 11.7117 4.5422C11.7099 4.89102 11.7499 5.23881 11.8308 5.57813C10.0016 5.49238 8.2104 5.02575 6.57187 4.2081C4.93333 3.39044 3.48351 2.23977 2.31516 0.829695C1.90527 1.52069 1.6885 2.30909 1.6875 3.11251C1.6875 4.68751 2.50922 6.0797 3.75 6.89532C3.01487 6.87787 2.29481 6.68331 1.65094 6.32813V6.38438C1.65094 8.58751 3.24469 10.4203 5.35406 10.8375C4.9574 10.9433 4.54864 10.9968 4.13812 10.9969C3.84683 10.9974 3.5562 10.9691 3.27047 10.9125C3.85687 12.7172 5.56359 14.0297 7.58531 14.0672C5.94252 15.3333 3.9256 16.0175 1.85156 16.0125C1.48341 16.012 1.11561 15.9901 0.75 15.9469C2.85993 17.2942 5.31255 18.0068 7.81594 18C16.3172 18 20.9616 11.0766 20.9616 5.07188C20.9616 4.87501 20.9564 4.67813 20.947 4.48595C21.8485 3.84472 22.6283 3.04787 23.25 2.13282V2.13282Z" fill="black"/>
            </svg>
        </a>
    )
}
function WhatsappIcon({ title, url}){
    return(
        <a href={`https://api.whatsapp.com/send?text=${title} ${url}`} target="_blank" 
        rel="noreferrer" data-action="share/whatsapp/share">
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none">
                <path fill-rule="evenodd" clip-rule="evenodd" d="M19.4405 4.55149C18.4697 3.58027 17.3165 2.81065 16.0471 2.28693C14.7777 1.76322 13.4172 1.49575 12.0441 1.49993C6.28125 1.49993 1.59 6.16774 1.58766 11.9062C1.58511 13.7334 2.06676 15.5287 2.98359 17.1093L1.5 22.4999L7.04297 21.0529C8.57729 21.8841 10.2948 22.3191 12.0398 22.3185H12.0441C17.8064 22.3185 22.4972 17.6502 22.5 11.9123C22.5035 10.5438 22.2348 9.18826 21.7095 7.92458C21.1843 6.66091 20.413 5.5143 19.4405 4.55149V4.55149ZM12.0441 20.5621H12.0403C10.4847 20.5626 8.95739 20.1463 7.61719 19.3565L7.29984 19.169L4.01062 20.0277L4.88859 16.836L4.68187 16.5079C3.81206 15.1308 3.35121 13.535 3.35297 11.9062C3.35297 7.13758 7.25344 3.25774 12.0473 3.25774C14.347 3.25363 16.5542 4.16315 18.1833 5.78623C19.8125 7.40932 20.7302 9.61306 20.7347 11.9127C20.7328 16.6818 16.8342 20.5621 12.0441 20.5621V20.5621ZM16.8108 14.0845C16.5497 13.9541 15.2639 13.3251 15.0258 13.2384C14.7877 13.1516 14.6119 13.1081 14.438 13.3687C14.2641 13.6293 13.763 14.2124 13.6106 14.3882C13.4583 14.564 13.3059 14.5832 13.0448 14.4529C12.7838 14.3226 11.9414 14.0484 10.9434 13.1624C10.1667 12.4729 9.64266 11.6216 9.49031 11.3615C9.33797 11.1013 9.47391 10.9602 9.60469 10.8309C9.72234 10.7141 9.86578 10.5271 9.99656 10.3752C10.1273 10.2234 10.1709 10.1146 10.2577 9.94118C10.3444 9.76774 10.3012 9.61586 10.2361 9.48602C10.1709 9.35618 9.64828 8.07602 9.43078 7.55524C9.21844 7.04805 9.00328 7.11696 8.84297 7.10899C8.69062 7.10149 8.51484 7.09961 8.34188 7.09961C8.20965 7.10306 8.07955 7.13372 7.9597 7.18969C7.83985 7.24566 7.73283 7.32574 7.64531 7.42493C7.40578 7.68555 6.73078 8.31555 6.73078 9.5943C6.73078 10.8731 7.66828 12.1106 7.79766 12.284C7.92703 12.4574 9.63984 15.0838 12.2606 16.2102C12.7473 16.4187 13.2445 16.6014 13.7503 16.7577C14.3761 16.9556 14.9456 16.9279 15.3956 16.8609C15.8977 16.7863 16.9425 16.2318 17.1595 15.6243C17.3766 15.0168 17.377 14.4965 17.3119 14.3882C17.2467 14.2799 17.0723 14.2143 16.8108 14.0845V14.0845Z" fill="black"/>
            </svg>
        </a>
    )
}
function FacebookIcon({ url }){
    return(
        <a href={`href="https://www.facebook.com/sharer.php?u=${url}`} target="_blank" rel="noreferrer">
            <svg xmlns="http://www.w3.org/2000/svg" width="22" height="22" viewBox="0 0 22 22" fill="none">
                <path fill-rule="evenodd" clip-rule="evenodd" d="M21.5 11.0634C21.5 5.26492 16.7984 0.563354 11 0.563354C5.20156 0.563354 0.5 5.26492 0.5 11.0634C0.5 16.304 4.33906 20.6479 9.35938 21.4363V14.0994H6.69266V11.0634H9.35938V8.75007C9.35938 6.11898 10.9273 4.66445 13.3255 4.66445C14.4744 4.66445 15.6763 4.86976 15.6763 4.86976V7.45398H14.3516C13.048 7.45398 12.6402 8.26304 12.6402 9.09461V11.0634H15.552L15.087 14.0994H12.6406V21.4373C17.6609 20.6493 21.5 16.3054 21.5 11.0634V11.0634Z" fill="black"/>
            </svg>
        </a>
    )
}

export default Share